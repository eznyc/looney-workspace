<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ü•ï Looney Tunes Workspace - What's Up, Doc?</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Bangers&family=Luckiest+Guy&display=swap');

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: #FF6B00;
            background: radial-gradient(circle at top, #FF6B00 0%, #FF1744 50%, #2979FF 100%);
            min-height: 100vh;
            overflow-x: hidden;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        /* Looney Tunes Header */
        .header {
            background: linear-gradient(135deg, #FF1744 0%, #FF6B00 100%);
            border: 6px solid #000;
            border-radius: 20px;
            padding: 30px;
            text-align: center;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5),
                        inset 0 0 0 3px #FFF,
                        inset 0 0 0 6px #000;
            margin-bottom: 30px;
            position: relative;
        }

        .header::before {
            content: '';
            position: absolute;
            top: -15px;
            left: -15px;
            right: -15px;
            bottom: -15px;
            background: repeating-linear-gradient(
                45deg,
                transparent,
                transparent 10px,
                rgba(255, 255, 255, 0.1) 10px,
                rgba(255, 255, 255, 0.1) 20px
            );
            border-radius: 25px;
            z-index: -1;
        }

        .header h1 {
            font-family: 'Bangers', cursive;
            font-size: 4em;
            color: #FFF;
            text-shadow:
                4px 4px 0 #000,
                6px 6px 0 #FF6B00,
                -2px -2px 0 #000,
                2px -2px 0 #000,
                -2px 2px 0 #000,
                2px 2px 0 #000;
            letter-spacing: 3px;
            margin-bottom: 10px;
            animation: bounce 2s infinite;
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0) scale(1); }
            50% { transform: translateY(-10px) scale(1.02); }
        }

        .header p {
            font-family: 'Luckiest Guy', cursive;
            font-size: 1.8em;
            color: #FFF;
            text-shadow: 3px 3px 0 #000;
        }

        /* Bugs Bunny Character */
        .bugs-bunny {
            font-size: 8em;
            position: absolute;
            right: 50px;
            top: 50%;
            transform: translateY(-50%);
            animation: wiggle 3s infinite;
            filter: drop-shadow(5px 5px 0 rgba(0, 0, 0, 0.5));
        }

        @keyframes wiggle {
            0%, 100% { transform: translateY(-50%) rotate(0deg); }
            25% { transform: translateY(-55%) rotate(-5deg); }
            75% { transform: translateY(-45%) rotate(5deg); }
        }

        /* Tab Navigation - REAL TABS NOW */
        .tabs {
            display: flex;
            gap: 5px;
            margin-bottom: 0;
            background: rgba(0, 0, 0, 0.3);
            padding: 10px;
            border-radius: 15px 15px 0 0;
            border: 5px solid #000;
            border-bottom: none;
        }

        .tab {
            flex: 1;
            padding: 20px;
            background: linear-gradient(135deg, #FFD700 0%, #FFA500 100%);
            border: 4px solid #000;
            border-radius: 10px 10px 0 0;
            cursor: pointer;
            font-family: 'Bangers', cursive;
            font-size: 1.3em;
            color: #000;
            text-align: center;
            transition: all 0.3s;
            box-shadow: inset 0 -5px 0 rgba(0, 0, 0, 0.2);
            position: relative;
            bottom: -5px;
        }

        .tab:hover {
            background: linear-gradient(135deg, #FFE44D 0%, #FFB733 100%);
            transform: translateY(-5px);
        }

        .tab.active {
            background: #FFF;
            border-bottom: 4px solid #FFF;
            bottom: 0;
            transform: translateY(-3px) scale(1.05);
            box-shadow:
                inset 0 0 0 2px #FFD700,
                0 -5px 10px rgba(0, 0, 0, 0.3);
            z-index: 10;
        }

        .tab i {
            margin-right: 10px;
            font-size: 1.2em;
        }

        /* Tab Content */
        .tab-content {
            background: #FFF;
            border: 5px solid #000;
            border-radius: 0 0 15px 15px;
            padding: 40px;
            min-height: 600px;
            box-shadow:
                0 10px 30px rgba(0, 0, 0, 0.5),
                inset 0 0 0 3px #FFD700;
        }

        .tab-panel {
            display: none;
            animation: slideIn 0.3s ease-out;
        }

        .tab-panel.active {
            display: block;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Calculator Styles */
        .calc-display {
            background: #000;
            color: #0F0;
            font-family: 'Courier New', monospace;
            font-size: 3em;
            padding: 25px;
            border: 5px solid #FFD700;
            border-radius: 10px;
            text-align: right;
            margin-bottom: 20px;
            min-height: 80px;
            box-shadow:
                inset 0 0 20px rgba(0, 255, 0, 0.3),
                0 5px 15px rgba(0, 0, 0, 0.3);
        }

        .calc-buttons {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px;
        }

        .calc-btn {
            padding: 25px;
            font-family: 'Bangers', cursive;
            font-size: 1.8em;
            border: 4px solid #000;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.1s;
            box-shadow: 0 5px 0 rgba(0, 0, 0, 0.3);
        }

        .calc-btn:active {
            transform: translateY(5px);
            box-shadow: 0 0 0 rgba(0, 0, 0, 0.3);
        }

        .calc-number {
            background: linear-gradient(135deg, #FFD700 0%, #FFA500 100%);
            color: #000;
        }

        .calc-operator {
            background: linear-gradient(135deg, #FF1744 0%, #C51162 100%);
            color: #FFF;
        }

        .calc-equals {
            background: linear-gradient(135deg, #00E676 0%, #00C853 100%);
            color: #000;
            grid-column: span 2;
        }

        .calc-clear {
            background: linear-gradient(135deg, #2979FF 0%, #1565C0 100%);
            color: #FFF;
        }

        /* Notes Styles */
        .notes-toolbar {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }

        .notes-btn {
            padding: 15px 25px;
            font-family: 'Bangers', cursive;
            font-size: 1.2em;
            border: 4px solid #000;
            border-radius: 10px;
            cursor: pointer;
            background: linear-gradient(135deg, #FFD700 0%, #FFA500 100%);
            transition: all 0.2s;
        }

        .notes-btn.active {
            background: linear-gradient(135deg, #00E676 0%, #00C853 100%);
            transform: scale(1.05);
        }

        .notes-editor {
            width: 100%;
            min-height: 400px;
            padding: 20px;
            font-size: 1.1em;
            border: 4px solid #000;
            border-radius: 10px;
            font-family: 'Courier New', monospace;
            resize: vertical;
        }

        .notes-preview {
            padding: 20px;
            border: 4px solid #000;
            border-radius: 10px;
            background: #FFFEF0;
            min-height: 400px;
            font-size: 1.1em;
            line-height: 1.6;
        }

        /* Todo Styles */
        .todo-input-group {
            display: flex;
            gap: 10px;
            margin-bottom: 25px;
        }

        .todo-input {
            flex: 1;
            padding: 15px 20px;
            font-size: 1.2em;
            border: 4px solid #000;
            border-radius: 10px;
        }

        .todo-add-btn {
            padding: 15px 30px;
            font-family: 'Bangers', cursive;
            font-size: 1.3em;
            border: 4px solid #000;
            border-radius: 10px;
            background: linear-gradient(135deg, #00E676 0%, #00C853 100%);
            cursor: pointer;
            transition: all 0.2s;
        }

        .todo-add-btn:hover {
            transform: scale(1.05);
        }

        .todo-list {
            list-style: none;
        }

        .todo-item {
            padding: 20px;
            margin-bottom: 15px;
            background: linear-gradient(135deg, #FFD700 0%, #FFA500 100%);
            border: 4px solid #000;
            border-radius: 10px;
            display: flex;
            align-items: center;
            gap: 15px;
            font-size: 1.2em;
            transition: all 0.2s;
        }

        .todo-item:hover {
            transform: translateX(5px);
        }

        .todo-item.completed {
            opacity: 0.6;
            text-decoration: line-through;
            background: #CCC;
        }

        .todo-checkbox {
            width: 30px;
            height: 30px;
            cursor: pointer;
        }

        .todo-text {
            flex: 1;
        }

        .todo-delete {
            padding: 10px 20px;
            font-family: 'Bangers', cursive;
            background: #FF1744;
            color: #FFF;
            border: 3px solid #000;
            border-radius: 8px;
            cursor: pointer;
        }

        /* Code Playground */
        .code-toolbar {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
        }

        .code-select {
            padding: 12px 20px;
            font-size: 1.1em;
            border: 4px solid #000;
            border-radius: 8px;
            font-family: 'Bangers', cursive;
        }

        .code-textarea {
            width: 100%;
            min-height: 300px;
            padding: 20px;
            font-family: 'Courier New', monospace;
            font-size: 1em;
            border: 4px solid #000;
            border-radius: 10px;
            background: #1e1e1e;
            color: #d4d4d4;
            resize: vertical;
        }

        .code-output {
            margin-top: 15px;
            padding: 20px;
            background: #000;
            color: #0F0;
            border: 4px solid #FFD700;
            border-radius: 10px;
            font-family: 'Courier New', monospace;
            min-height: 100px;
            white-space: pre-wrap;
        }

        .code-btn {
            padding: 12px 25px;
            font-family: 'Bangers', cursive;
            font-size: 1.2em;
            border: 4px solid #000;
            border-radius: 10px;
            cursor: pointer;
            background: linear-gradient(135deg, #00E676 0%, #00C853 100%);
        }

        /* Drawing Canvas */
        .canvas-toolbar {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
            align-items: center;
        }

        .canvas-toolbar input[type="color"] {
            width: 80px;
            height: 50px;
            border: 4px solid #000;
            border-radius: 8px;
            cursor: pointer;
        }

        .canvas-toolbar input[type="range"] {
            flex: 1;
            height: 40px;
        }

        .canvas-board {
            border: 5px solid #000;
            border-radius: 10px;
            background: #FFF;
            cursor: crosshair;
            display: block;
            width: 100%;
            height: 500px;
        }

        /* Timer */
        .timer-display {
            font-family: 'Bangers', cursive;
            font-size: 8em;
            text-align: center;
            color: #FF1744;
            text-shadow: 5px 5px 0 #000;
            margin: 40px 0;
        }

        .timer-controls {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-bottom: 30px;
        }

        .timer-btn {
            padding: 20px 40px;
            font-family: 'Bangers', cursive;
            font-size: 1.5em;
            border: 4px solid #000;
            border-radius: 10px;
            cursor: pointer;
            background: linear-gradient(135deg, #FFD700 0%, #FFA500 100%);
        }

        .timer-presets {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            max-width: 600px;
            margin: 0 auto;
        }

        /* Footer */
        .footer {
            text-align: center;
            padding: 30px;
            font-family: 'Bangers', cursive;
            font-size: 2em;
            color: #FFF;
            text-shadow: 3px 3px 0 #000;
            margin-top: 30px;
        }

        .acme-stamp {
            display: inline-block;
            padding: 10px 30px;
            background: #FF1744;
            border: 5px solid #000;
            border-radius: 10px;
            transform: rotate(-5deg);
            box-shadow: 5px 5px 0 rgba(0, 0, 0, 0.3);
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <span class="bugs-bunny">üê∞ü•ï</span>
            <h1>LOONEY TUNES WORKSPACE</h1>
            <p>"What's up, Doc? Let's get to work!"</p>
        </div>

        <!-- Tabs Navigation -->
        <div class="tabs">
            <div class="tab active" onclick="switchTab('calculator')">
                <i class="fas fa-calculator"></i>
                CALCULATOR
            </div>
            <div class="tab" onclick="switchTab('notes')">
                <i class="fas fa-sticky-note"></i>
                NOTES
            </div>
            <div class="tab" onclick="switchTab('todo')">
                <i class="fas fa-tasks"></i>
                TODO LIST
            </div>
            <div class="tab" onclick="switchTab('code')">
                <i class="fas fa-code"></i>
                CODE
            </div>
            <div class="tab" onclick="switchTab('drawing')">
                <i class="fas fa-palette"></i>
                DRAWING
            </div>
            <div class="tab" onclick="switchTab('timer')">
                <i class="fas fa-clock"></i>
                TIMER
            </div>
        </div>

        <!-- Tab Content -->
        <div class="tab-content">
            <!-- Calculator Panel -->
            <div id="calculator" class="tab-panel active">
                <h2 style="font-family: 'Bangers', cursive; font-size: 2em; margin-bottom: 20px;">üßÆ ACME CALCULATOR</h2>
                <div class="calc-display" id="calc-display">0</div>
                <div class="calc-buttons">
                    <button class="calc-btn calc-clear" onclick="calcClear()">C</button>
                    <button class="calc-btn calc-operator" onclick="calcAppend('/')">/</button>
                    <button class="calc-btn calc-operator" onclick="calcAppend('*')">√ó</button>
                    <button class="calc-btn calc-operator" onclick="calcDelete()">‚å´</button>

                    <button class="calc-btn calc-number" onclick="calcAppend('7')">7</button>
                    <button class="calc-btn calc-number" onclick="calcAppend('8')">8</button>
                    <button class="calc-btn calc-number" onclick="calcAppend('9')">9</button>
                    <button class="calc-btn calc-operator" onclick="calcAppend('-')">-</button>

                    <button class="calc-btn calc-number" onclick="calcAppend('4')">4</button>
                    <button class="calc-btn calc-number" onclick="calcAppend('5')">5</button>
                    <button class="calc-btn calc-number" onclick="calcAppend('6')">6</button>
                    <button class="calc-btn calc-operator" onclick="calcAppend('+')">+</button>

                    <button class="calc-btn calc-number" onclick="calcAppend('1')">1</button>
                    <button class="calc-btn calc-number" onclick="calcAppend('2')">2</button>
                    <button class="calc-btn calc-number" onclick="calcAppend('3')">3</button>
                    <button class="calc-btn calc-number" onclick="calcAppend('.')">.</button>

                    <button class="calc-btn calc-number" onclick="calcAppend('0')" style="grid-column: span 2;">0</button>
                    <button class="calc-btn calc-equals" onclick="calcCalculate()">=</button>
                </div>
            </div>

            <!-- Notes Panel -->
            <div id="notes" class="tab-panel">
                <h2 style="font-family: 'Bangers', cursive; font-size: 2em; margin-bottom: 20px;">üìù DAFFY'S NOTES</h2>
                <div class="notes-toolbar">
                    <button class="notes-btn active" onclick="switchNotesMode('edit')">EDIT</button>
                    <button class="notes-btn" onclick="switchNotesMode('preview')">PREVIEW</button>
                </div>
                <textarea class="notes-editor" id="notes-editor" placeholder="Write your notes here...
# Heading
- Bullet point
**bold** *italic*

That's all folks!"></textarea>
                <div class="notes-preview" id="notes-preview" style="display: none;"></div>
            </div>

            <!-- Todo Panel -->
            <div id="todo" class="tab-panel">
                <h2 style="font-family: 'Bangers', cursive; font-size: 2em; margin-bottom: 20px;">‚úÖ ROADRUNNER'S TODO LIST</h2>
                <div class="todo-input-group">
                    <input type="text" class="todo-input" id="todo-input" placeholder="Add a new task... (Beep beep!)">
                    <button class="todo-add-btn" onclick="addTodo()">ADD</button>
                </div>
                <ul class="todo-list" id="todo-list"></ul>
            </div>

            <!-- Code Panel -->
            <div id="code" class="tab-panel">
                <h2 style="font-family: 'Bangers', cursive; font-size: 2em; margin-bottom: 20px;">üíª WILE E. COYOTE'S CODE LAB</h2>
                <div class="code-toolbar">
                    <select class="code-select" id="code-lang">
                        <option value="javascript">JavaScript</option>
                        <option value="python">Python</option>
                        <option value="html">HTML</option>
                    </select>
                    <button class="code-btn" onclick="runCode()">
                        <i class="fas fa-play"></i> RUN
                    </button>
                    <button class="code-btn" onclick="clearCode()">CLEAR</button>
                </div>
                <textarea class="code-textarea" id="code-input" placeholder="// Write your code here...
console.log('That\\'s all folks!');">console.log('That\\'s all folks!');</textarea>
                <div class="code-output" id="code-output">Output will appear here...</div>
            </div>

            <!-- Drawing Panel -->
            <div id="drawing" class="tab-panel">
                <h2 style="font-family: 'Bangers', cursive; font-size: 2em; margin-bottom: 20px;">üé® TAZ'S DRAWING CANVAS</h2>
                <div class="canvas-toolbar">
                    <input type="color" id="draw-color" value="#000000">
                    <label style="font-family: 'Bangers', cursive; font-size: 1.2em;">Brush Size:</label>
                    <input type="range" id="draw-size" min="1" max="30" value="5">
                    <button class="notes-btn" onclick="clearCanvas()">CLEAR</button>
                    <button class="notes-btn" onclick="saveCanvas()">SAVE</button>
                </div>
                <canvas class="canvas-board" id="draw-canvas"></canvas>
            </div>

            <!-- Timer Panel -->
            <div id="timer" class="tab-panel">
                <h2 style="font-family: 'Bangers', cursive; font-size: 2em; margin-bottom: 20px; text-align: center;">‚è±Ô∏è PORKY'S POMODORO TIMER</h2>
                <div class="timer-display" id="timer-display">25:00</div>
                <div class="timer-controls">
                    <button class="timer-btn" onclick="startTimer()">START</button>
                    <button class="timer-btn" onclick="pauseTimer()">PAUSE</button>
                    <button class="timer-btn" onclick="resetTimer()">RESET</button>
                </div>
                <div class="timer-presets">
                    <button class="timer-btn" onclick="setTimer(5)">5 MIN</button>
                    <button class="timer-btn" onclick="setTimer(15)">15 MIN</button>
                    <button class="timer-btn" onclick="setTimer(25)">25 MIN</button>
                </div>
            </div>
        </div>

        <!-- Footer -->
        <div class="footer">
            <div class="acme-stamp">THAT'S ALL FOLKS! üé¨</div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/marked/11.1.1/marked.min.js"></script>
    <script>
        // Tab Switching
        function switchTab(tabName) {
            // Update tab buttons
            document.querySelectorAll('.tab').forEach(tab => tab.classList.remove('active'));
            event.target.closest('.tab').classList.add('active');

            // Update panels
            document.querySelectorAll('.tab-panel').forEach(panel => panel.classList.remove('active'));
            document.getElementById(tabName).classList.add('active');

            // Save current tab
            localStorage.setItem('currentTab', tabName);
        }

        // Calculator Functions - FULLY FUNCTIONAL
        let calcInput = '0';
        let calcLastResult = null;

        function calcAppend(val) {
            const display = document.getElementById('calc-display');

            if (calcLastResult !== null && !isNaN(val)) {
                calcInput = val;
                calcLastResult = null;
            } else if (calcInput === '0') {
                calcInput = val === '.' ? '0.' : val;
            } else if (['+', '-', '*', '/'].includes(val)) {
                const lastChar = calcInput.slice(-1);
                if (['+', '-', '*', '/'].includes(lastChar)) {
                    calcInput = calcInput.slice(0, -1) + val;
                } else {
                    calcInput += val;
                }
            } else if (val === '.') {
                const parts = calcInput.split(/[\+\-\*\/]/);
                const lastPart = parts[parts.length - 1];
                if (!lastPart.includes('.')) {
                    calcInput += val;
                }
            } else {
                calcInput += val;
            }

            display.textContent = calcInput;
        }

        function calcClear() {
            calcInput = '0';
            calcLastResult = null;
            document.getElementById('calc-display').textContent = calcInput;
        }

        function calcDelete() {
            calcInput = calcInput.length > 1 ? calcInput.slice(0, -1) : '0';
            document.getElementById('calc-display').textContent = calcInput;
        }

        function calcCalculate() {
            const display = document.getElementById('calc-display');
            try {
                if (!/^[0-9+\-*/.() ]+$/.test(calcInput)) throw new Error("Invalid");
                const result = eval(calcInput.replace(/√ó/g, '*'));
                if (!isFinite(result)) throw new Error("Math error");

                const rounded = Math.round(result * 100000000) / 100000000;
                calcLastResult = rounded;
                calcInput = rounded.toString();
                display.textContent = calcInput;
            } catch {
                display.textContent = 'ERROR!';
                display.style.color = '#FF1744';
                setTimeout(() => {
                    calcClear();
                    display.style.color = '#0F0';
                }, 1500);
            }
        }

        // Notes Functions
        function switchNotesMode(mode) {
            const editor = document.getElementById('notes-editor');
            const preview = document.getElementById('notes-preview');
            const buttons = document.querySelectorAll('.notes-btn');

            buttons.forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');

            if (mode === 'edit') {
                editor.style.display = 'block';
                preview.style.display = 'none';
            } else {
                editor.style.display = 'none';
                preview.style.display = 'block';
                preview.innerHTML = marked.parse(editor.value);
            }
        }

        // Todo Functions
        let todos = JSON.parse(localStorage.getItem('todos')) || [];

        function renderTodos() {
            const list = document.getElementById('todo-list');
            list.innerHTML = todos.map((todo, i) => `
                <li class="todo-item ${todo.completed ? 'completed' : ''}">
                    <input type="checkbox" class="todo-checkbox" ${todo.completed ? 'checked' : ''}
                           onchange="toggleTodo(${i})">
                    <span class="todo-text">${todo.text}</span>
                    <button class="todo-delete" onclick="deleteTodo(${i})">DELETE</button>
                </li>
            `).join('');
        }

        function addTodo() {
            const input = document.getElementById('todo-input');
            if (!input.value.trim()) return;
            todos.push({ text: input.value, completed: false });
            input.value = '';
            renderTodos();
            localStorage.setItem('todos', JSON.stringify(todos));
        }

        function toggleTodo(index) {
            todos[index].completed = !todos[index].completed;
            renderTodos();
            localStorage.setItem('todos', JSON.stringify(todos));
        }

        function deleteTodo(index) {
            todos.splice(index, 1);
            renderTodos();
            localStorage.setItem('todos', JSON.stringify(todos));
        }

        // Code Functions
        function runCode() {
            const code = document.getElementById('code-input').value;
            const output = document.getElementById('code-output');
            const lang = document.getElementById('code-lang').value;

            if (lang === 'javascript') {
                try {
                    const log = [];
                    const customConsole = { log: (...args) => log.push(args.join(' ')) };
                    const func = new Function('console', code);
                    func(customConsole);
                    output.textContent = log.join('\n') || 'No output';
                } catch (e) {
                    output.textContent = `ERROR: ${e.message}`;
                }
            } else {
                output.textContent = `${lang.toUpperCase()} execution not supported in browser!`;
            }
        }

        function clearCode() {
            document.getElementById('code-input').value = '';
            document.getElementById('code-output').textContent = 'Output will appear here...';
        }

        // Drawing Functions
        let isDrawing = false;
        let ctx = null;

        function initCanvas() {
            const canvas = document.getElementById('draw-canvas');
            canvas.width = canvas.offsetWidth;
            canvas.height = canvas.offsetHeight;
            ctx = canvas.getContext('2d');

            canvas.addEventListener('mousedown', startDrawing);
            canvas.addEventListener('mousemove', draw);
            canvas.addEventListener('mouseup', stopDrawing);
            canvas.addEventListener('mouseout', stopDrawing);
        }

        function startDrawing(e) {
            isDrawing = true;
            const rect = e.target.getBoundingClientRect();
            ctx.beginPath();
            ctx.moveTo(e.clientX - rect.left, e.clientY - rect.top);
        }

        function draw(e) {
            if (!isDrawing) return;
            const rect = e.target.getBoundingClientRect();
            const x = e.clientX - rect.left;
            const y = e.clientY - rect.top;

            ctx.strokeStyle = document.getElementById('draw-color').value;
            ctx.lineWidth = document.getElementById('draw-size').value;
            ctx.lineCap = 'round';
            ctx.lineTo(x, y);
            ctx.stroke();
        }

        function stopDrawing() {
            isDrawing = false;
        }

        function clearCanvas() {
            const canvas = document.getElementById('draw-canvas');
            ctx.clearRect(0, 0, canvas.width, canvas.height);
        }

        function saveCanvas() {
            const canvas = document.getElementById('draw-canvas');
            const link = document.createElement('a');
            link.download = 'looney-drawing.png';
            link.href = canvas.toDataURL();
            link.click();
        }

        // Timer Functions
        let timerInterval = null;
        let timerSeconds = 25 * 60;

        function updateTimerDisplay() {
            const mins = Math.floor(timerSeconds / 60);
            const secs = timerSeconds % 60;
            document.getElementById('timer-display').textContent =
                `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
        }

        function startTimer() {
            if (timerInterval) return;
            timerInterval = setInterval(() => {
                if (timerSeconds > 0) {
                    timerSeconds--;
                    updateTimerDisplay();
                } else {
                    pauseTimer();
                    alert('‚è∞ Th-th-th-that\'s all folks! Time\'s up!');
                }
            }, 1000);
        }

        function pauseTimer() {
            clearInterval(timerInterval);
            timerInterval = null;
        }

        function resetTimer() {
            pauseTimer();
            timerSeconds = 25 * 60;
            updateTimerDisplay();
        }

        function setTimer(minutes) {
            pauseTimer();
            timerSeconds = minutes * 60;
            updateTimerDisplay();
        }

        // Auto-save notes
        setInterval(() => {
            const notes = document.getElementById('notes-editor')?.value;
            if (notes) localStorage.setItem('notes', notes);
        }, 5000);

        // Initialize on load
        window.addEventListener('load', () => {
            // Restore last tab
            const lastTab = localStorage.getItem('currentTab');
            if (lastTab) {
                document.querySelectorAll('.tab').forEach(tab => tab.classList.remove('active'));
                document.querySelectorAll('.tab-panel').forEach(panel => panel.classList.remove('active'));
                document.querySelector(`[onclick*="${lastTab}"]`)?.classList.add('active');
                document.getElementById(lastTab)?.classList.add('active');
            }

            // Restore todos
            renderTodos();

            // Restore notes
            const savedNotes = localStorage.getItem('notes');
            if (savedNotes) {
                document.getElementById('notes-editor').value = savedNotes;
            }

            // Init canvas
            initCanvas();
        });

        // Keyboard shortcuts
        document.addEventListener('keydown', (e) => {
            // Ctrl+S to save
            if ((e.ctrlKey || e.metaKey) && e.key === 's') {
                e.preventDefault();
                alert('üíæ Workspace saved! Beep beep!');
            }
        });
    </script>
</body>
</html>